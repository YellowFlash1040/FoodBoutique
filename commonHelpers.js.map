{"version":3,"file":"commonHelpers.js","sources":["../src/js/partials/show-all-in-cart.js","../src/js/cart-page.js","../../../../../../images/png/cherry-tomatos-phone.png","../../../../../../images/png/cherry-tomatos-phone@2x.png","../src/js/checkout-modal-window.js","../src/js/checkout-form.js"],"sourcesContent":["import { showCartAmount, clearCart, deleteFromCart } from \"./cart\";\nimport { getInCart } from \"./cart\";\nimport { getItem } from \"./requests\";\n\nimport icons from \"/images/svg/icons.svg\";\n\nconst cartItemsList = document.getElementById(\"cart-items-list\");\n\nconst deleteAllBtn = document.getElementById(\"delete-all-btn\");\n\nlet totalPrice = 0;\n\ndeleteAllBtn.addEventListener(\"click\", () => {\n  clearCart();\n  showCartAmount();\n  fillItemsList();\n  showTotalPrice();\n});\n\nfunction showTotalPrice() {\n  const span = document.getElementById(\"sum-span\");\n  span.innerText = `$${String(totalPrice)}`;\n}\n\nexport async function fillItemsList() {\n  const inCart = getInCart();\n\n  const items = [];\n  for (const id of inCart) {\n    const item = await getItem(id);\n    items.push(item);\n  }\n\n  const nothingFound = document.getElementById(\"nothing-found-cart\");\n  const deleteAll = document.querySelector(\".delete-all\");\n  const checkoutPanel = document.querySelector(\".checkout-panel-container\");\n  const cartSect = document.querySelector(\".cart-sect\");\n  if (items.length === 0) {\n    cartSect.style.display = \"block\";\n    deleteAll.style.display = \"none\";\n    cartItemsList.style.display = \"none\";\n    checkoutPanel.style.display = \"none\";\n    nothingFound.style.display = \"block\";\n    return;\n  } else {\n    cartSect.style.display = \"flex\";\n    deleteAll.style.display = \"flex\";\n    cartItemsList.style.display = \"block\";\n    checkoutPanel.style.display = \"block\";\n    nothingFound.style.display = \"none\";\n  }\n\n  createCartCards(items);\n}\n\nfunction createCartCards(hits) {\n  const items = [];\n\n  totalPrice = 0;\n  for (const hit of hits) {\n    totalPrice += hit.price;\n\n    const li = document.createElement(\"li\");\n    li.className = \"cart-products-item\";\n\n    let dataProductId = `data-product-id=\"${hit._id}\"`;\n\n    li.innerHTML = `\n      <div class=\"cart-product-img-container\">\n        <img class=\"cart-product-img\" src=\"${hit.img}\" alt=\"${hit.name}\" />\n      </div>\n      <div>\n        <h3 class=\"product-title\">${hit.name}</h3>\n        <ul class=\"product-properties-list\">\n          <li class=\"product-properties-item\">\n            Category:\n            <span class=\"property-value\">${hit.category.replaceAll( \"_\", \" \" )}</span>\n          </li>\n          <li class=\"product-properties-item\">\n            Size: <span class=\"property-value\">${hit.size}</span>\n          </li>\n        </ul>\n      \n        <span class=\"price\">$${hit.price}</span>\n      </div>\n      <button class=\"delete-from-cart-btn\" ${dataProductId}>\n        <svg class=\"delete-from-cart-svg\">\n          <use href=\"${icons + \"#icon-close\"}\"></use>\n        </svg>\n      </button>\n    `;\n\n    \n    items.push(li);\n  }\n\n  totalPrice =  totalPrice.toFixed(2);\n\n  cartItemsList.innerHTML = \"\";\n  cartItemsList.append(...items);\n\n  const btns = document.querySelectorAll(\"button[data-product-id]\");\n\n  for (const btn of btns) {\n    btn.addEventListener(\"click\", removeFromCart);\n  }\n\n  function removeFromCart(evt) {\n    const btn = evt.currentTarget;\n    const id = btn.getAttribute(\"data-product-id\");\n    deleteFromCart(id);\n    showCartAmount();\n    fillItemsList();\n    showTotalPrice();\n  }\n\n  showTotalPrice();\n}\n","import { showCartAmount } from \"./partials/cart\";\nimport { fillItemsList } from \"./partials/show-all-in-cart\";\n\nshowCartAmount();\n\nfillItemsList();\n","export default \"__VITE_PUBLIC_ASSET__499b3bae__\"","export default \"__VITE_PUBLIC_ASSET__2b51324e__\"","import icons from \"/images/svg/icons.svg\";\n\nimport mobileImagePath from \"/images/png/cherry-tomatos-phone.png\";\nimport mobileImagePath_2x from \"/images/png/cherry-tomatos-phone@2x.png\";\n\nconst imageAlt = \"Cherry tomatos\";\nconst closeModalWindowIconPath = `${icons}#icon-close`;\n\nexport function createMarkup() {\n  return `\n    <div class=\"checkout-modal-window\">\n        <picture>\n            <source srcset=\"${mobileImagePath}, ${mobileImagePath_2x} 2x\">\n  \n            <img class=\"image\" src=\"${mobileImagePath}\" alt=\"${imageAlt}\" width=\"145\" height=\"140\"/>\n        </picture>\n\n        <p class=\"title\">Order success</p>\n        <p class=\"message\">Thank you for shopping at Food Boutique. Your order has been received and is now being freshly prepared just for you! Get ready to indulge in nourishing goodness, delivered right to your doorstep. We're thrilled to be part of your journey to better health and happiness.</p>\n\n        <svg class=\"close-icon\" width=\"22\" height=\"22\">\n            <use href=\"${closeModalWindowIconPath}\"></use>\n        </svg>\n    </div>\n    `;\n}\n","import axios from 'axios';\nimport { getInCart, clearCart } from './partials/cart';\nimport * as checkoutModalWindow from './checkout-modal-window';\n\nconst checkoutForm = document.querySelector('form.checkout-form');\ncheckoutForm.addEventListener('submit', form_Submit);\n\nlet modalWindow;\n\nasync function form_Submit(event) {\n  event.preventDefault();\n\n  const emailField = document.querySelector('input#email.mail-field');\n\n  const productsInCart = getInCart();\n  clearCart();\n  refreshPageLayout();\n\n  const response = await sendOrderToBackEnd(emailField.value, productsInCart);\n\n  if (response === 201) {\n    const markup = checkoutModalWindow.createMarkup();\n\n    const options = {\n      onClose: enablePageScroll,\n    };\n\n    modalWindow = basicLightbox.create(markup, options);\n\n    const scrollLockMethod = 'disableBodyScroll';\n    bodyScrollLock[scrollLockMethod](document.body);\n\n    modalWindow.show();\n\n    const closeModalWindowButton = document.querySelector(\n      '.checkout-modal-window .close-icon'\n    );\n    closeModalWindowButton.addEventListener('click', modalWindow.close);\n    document.addEventListener('keydown', closeLightBox);\n  } else {\n    console.log('Something went wrong :(');\n  }\n}\n\nfunction refreshPageLayout() {\n  const nothingFound = document.getElementById('nothing-found-cart');\n  const deleteAll = document.querySelector('.delete-all');\n  const checkoutPanel = document.querySelector('.checkout-panel-container');\n  const cartSect = document.querySelector('.cart-sect');\n  const cartItemsList = document.getElementById('cart-items-list');\n\n  cartSect.style.display = 'block';\n  deleteAll.style.display = 'none';\n  cartItemsList.style.display = 'none';\n  checkoutPanel.style.display = 'none';\n  nothingFound.style.display = 'block';\n\n  const quantityTitle = document.getElementById('cart-quantity-title');\n  quantityTitle.innerText = `cart (${0})`;\n  const quantitySpan = document.getElementById('cart-quantity');\n  quantitySpan.innerText = `cart (${0})`;\n}\n\nasync function sendOrderToBackEnd(email, productIds) {\n  const url = 'https://food-boutique.b.goit.study/api/orders';\n\n  const products = productIds.map(product => ({\n    productId: product,\n    amount: 1,\n  }));\n\n  const requestBody = {\n    email,\n    products,\n  };\n\n  try {\n    const response = await axios.post(url, requestBody);\n    return response.status;\n  } catch (error) {\n    return error.response.status;\n  }\n}\n\nfunction enablePageScroll() {\n  const scrollLockMethod = 'enableBodyScroll';\n  bodyScrollLock[scrollLockMethod](document.body);\n}\n\nfunction closeLightBox(event) {\n  if (event.key === 'Escape') {\n    modalWindow.close();\n    document.removeEventListener('keydown', closeLightBox);\n  }\n}\n"],"names":["cartItemsList","deleteAllBtn","totalPrice","clearCart","showCartAmount","fillItemsList","showTotalPrice","span","inCart","getInCart","items","id","item","getItem","nothingFound","deleteAll","checkoutPanel","cartSect","createCartCards","hits","hit","li","dataProductId","icons","btns","btn","removeFromCart","evt","deleteFromCart","mobileImagePath","mobileImagePath_2x","imageAlt","closeModalWindowIconPath","createMarkup","checkoutForm","form_Submit","modalWindow","event","emailField","productsInCart","refreshPageLayout","sendOrderToBackEnd","markup","checkoutModalWindow.createMarkup","options","enablePageScroll","scrollLockMethod","closeLightBox","quantityTitle","quantitySpan","email","productIds","url","products","product","requestBody","axios","error"],"mappings":"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"}