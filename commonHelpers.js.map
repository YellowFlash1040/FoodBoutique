{"version":3,"file":"commonHelpers.js","sources":["../src/js/partials/show-all-in-cart.js","../src/js/cart-page.js"],"sourcesContent":["import { showCartAmount, clearCart, deleteFromCart } from \"./cart\";\nimport { getInCart } from \"./cart\";\nimport { getItem } from \"./requests\";\n\nconst cartItemsList = document.getElementById(\"cart-items-list\");\n\nconst deleteAllBtn = document.getElementById(\"delete-all-btn\");\n\nlet totalPrice = 0;\n\ndeleteAllBtn.addEventListener(\"click\", () => {\n  clearCart();\n  showCartAmount();\n  fillItemsList();\n  showTotalPrice();\n});\n\nfunction showTotalPrice() {\n  const span = document.getElementById(\"sum-span\");\n  span.innerText = `$${String(totalPrice)}`;\n}\n\nexport async function fillItemsList() {\n  const inCart = getInCart();\n\n  const items = [];\n  for (const id of inCart) {\n    const item = await getItem(id);\n    items.push(item);\n  }\n\n  const nothingFound = document.getElementById(\"nothing-found-cart\");\n  const deleteAll = document.querySelector(\".delete-all\");\n  const checkoutPanel = document.querySelector(\".checkout-panel-container\");\n  const cartSect = document.querySelector(\".cart-sect\");\n  if (items.length === 0) {\n    cartSect.style.display = \"block\";\n    deleteAll.style.display = \"none\";\n    cartItemsList.style.display = \"none\";\n    checkoutPanel.style.display = \"none\";\n    nothingFound.style.display = \"block\";\n    return;\n  } else {\n    cartSect.style.display = \"flex\";\n    deleteAll.style.display = \"flex\";\n    cartItemsList.style.display = \"block\";\n    checkoutPanel.style.display = \"block\";\n    nothingFound.style.display = \"none\";\n  }\n\n  createCartCards(items);\n}\n\nfunction createCartCards(hits) {\n  const items = [];\n\n  totalPrice = 0;\n  for (const hit of hits) {\n    totalPrice += hit.price;\n\n    const li = document.createElement(\"li\");\n    li.className = \"cart-products-item\";\n\n    let dataProductId = `data-product-id=\"${hit._id}\"`;\n\n    li.innerHTML = `\n      <div class=\"cart-product-img-container\">\n        <img class=\"cart-product-img\" src=\"${hit.img}\" alt=\"${hit.name}\" />\n      </div>\n      <div>\n        <h3 class=\"product-title\">${hit.name}</h3>\n        <ul class=\"product-properties-list\">\n          <li class=\"product-properties-item\">\n            Category:\n            <span class=\"property-value\">${hit.category.replaceAll( \"_\", \" \" )}</span>\n          </li>\n          <li class=\"product-properties-item\">\n            Size: <span class=\"property-value\">${hit.size}</span>\n          </li>\n        </ul>\n      \n        <span class=\"price\">$${hit.price}</span>\n      </div>\n      <button class=\"delete-from-cart-btn\" ${dataProductId}>\n        <svg class=\"delete-from-cart-svg\">\n          <use href=\"/images/svg/icons.svg#icon-close\"></use>\n        </svg>\n      </button>\n    `;\n\n    items.push(li);\n  }\n\n  cartItemsList.innerHTML = \"\";\n  cartItemsList.append(...items);\n\n  const btns = document.querySelectorAll(\"button[data-product-id]\");\n\n  for (const btn of btns) {\n    btn.addEventListener(\"click\", removeFromCart);\n  }\n\n  function removeFromCart(evt) {\n    const btn = evt.currentTarget;\n    const id = btn.getAttribute(\"data-product-id\");\n    deleteFromCart(id);\n    showCartAmount();\n    fillItemsList();\n    showTotalPrice();\n  }\n\n  showTotalPrice();\n}\n","import { showCartAmount } from \"./partials/cart\";\nimport { fillItemsList } from \"./partials/show-all-in-cart\";\n\nshowCartAmount();\n\nfillItemsList();\n"],"names":["cartItemsList","deleteAllBtn","totalPrice","clearCart","showCartAmount","fillItemsList","showTotalPrice","span","inCart","getInCart","items","id","item","getItem","nothingFound","deleteAll","checkoutPanel","cartSect","createCartCards","hits","hit","li","dataProductId","btns","btn","removeFromCart","evt","deleteFromCart"],"mappings":"gHAIA,MAAMA,EAAgB,SAAS,eAAe,iBAAiB,EAEzDC,EAAe,SAAS,eAAe,gBAAgB,EAE7D,IAAIC,EAAa,EAEjBD,EAAa,iBAAiB,QAAS,IAAM,CAC3CE,IACAC,IACAC,IACAC,GACF,CAAC,EAED,SAASA,GAAiB,CACxB,MAAMC,EAAO,SAAS,eAAe,UAAU,EAC/CA,EAAK,UAAY,IAAI,OAAOL,CAAU,CAAC,EACzC,CAEO,eAAeG,GAAgB,CACpC,MAAMG,EAASC,IAETC,EAAQ,CAAA,EACd,UAAWC,KAAMH,EAAQ,CACvB,MAAMI,EAAO,MAAMC,EAAQF,CAAE,EAC7BD,EAAM,KAAKE,CAAI,CAChB,CAED,MAAME,EAAe,SAAS,eAAe,oBAAoB,EAC3DC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAgB,SAAS,cAAc,2BAA2B,EAClEC,EAAW,SAAS,cAAc,YAAY,EACpD,GAAIP,EAAM,SAAW,EAAG,CACtBO,EAAS,MAAM,QAAU,QACzBF,EAAU,MAAM,QAAU,OAC1Bf,EAAc,MAAM,QAAU,OAC9BgB,EAAc,MAAM,QAAU,OAC9BF,EAAa,MAAM,QAAU,QAC7B,MACJ,MACIG,EAAS,MAAM,QAAU,OACzBF,EAAU,MAAM,QAAU,OAC1Bf,EAAc,MAAM,QAAU,QAC9BgB,EAAc,MAAM,QAAU,QAC9BF,EAAa,MAAM,QAAU,OAG/BI,EAAgBR,CAAK,CACvB,CAEA,SAASQ,EAAgBC,EAAM,CAC7B,MAAMT,EAAQ,CAAA,EAEdR,EAAa,EACb,UAAWkB,KAAOD,EAAM,CACtBjB,GAAckB,EAAI,MAElB,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,qBAEf,IAAIC,EAAgB,oBAAoBF,EAAI,GAAG,IAE/CC,EAAG,UAAY;AAAA;AAAA,6CAE0BD,EAAI,GAAG,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,oCAGlCA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,2CAIDA,EAAI,SAAS,WAAY,IAAK,GAAG,CAAE;AAAA;AAAA;AAAA,iDAG7BA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,+BAI1BA,EAAI,KAAK;AAAA;AAAA,6CAEKE,CAAa;AAAA;AAAA;AAAA;AAAA;AAAA,MAOtDZ,EAAM,KAAKW,CAAE,CACd,CAEDrB,EAAc,UAAY,GAC1BA,EAAc,OAAO,GAAGU,CAAK,EAE7B,MAAMa,EAAO,SAAS,iBAAiB,yBAAyB,EAEhE,UAAWC,KAAOD,EAChBC,EAAI,iBAAiB,QAASC,CAAc,EAG9C,SAASA,EAAeC,EAAK,CAE3B,MAAMf,EADMe,EAAI,cACD,aAAa,iBAAiB,EAC7CC,EAAehB,CAAE,EACjBP,IACAC,IACAC,GACD,CAEDA,GACF,CC7GAF,IAEAC,EAAe"}